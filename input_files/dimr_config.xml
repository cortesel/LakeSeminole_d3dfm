<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<dimrConfig xmlns="http://schemas.deltares.nl/dimr" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://schemas.deltares.nl/dimr https://content.oss.deltares.nl/schemas/dimr-1.2.xsd">
  <documentation>
    <fileVersion>1.2</fileVersion>
    <createdBy>Deltares, Coupling Team</createdBy>
    <creationDate>2025-10-07T22:58:40.06275Z</creationDate>
  </documentation>
  <!--<control>
          The <control> specifies the workflow of the deltaresHydro executable.
          It indicates which components are started in which order. If the data
          transfer is to be arranged by the main program "d_hydro", then a coupler
          should be included.
          The main <control> block is a sequential block; this means that each
          component is initialized, time stepped, and finalized before the next
          component starts.
      <parallel>
          Within a <parallel> tag the components are started
          concurrently (if the mpi process ids listed per component don't overlap)
          or executed synchronously in sequence (first all initialize, then time
          stepping, and to conclude all finalization calls).
      <start>
          A <parallel> block contains exactly one <start/> component, defining the
          start and end time of the simulation. This is the component inside
          the <parallel> block with the smallest time step. All other
          components must be defined with a <startGroup>.
      <startGroup>
          A <startGroup> should be used if a component (possibly including couplers)
          should only be executed at a subset of simulation time steps.

      For each component/coupler there will be a corresponding component/coupler
      specification block defined below.-->
  <control>
    <parallel>
      <startGroup>
        <time>0 300 99999999</time>
        <coupler name="flow_to_rtc" />
        <start name="Real_Time_Control" />
        <coupler name="rtc_to_flow" />
      </startGroup>
      <start name="FlowFM" />
    </parallel>
  </control>
  <component name="Real_Time_Control">
    <library>FBCTools_BMI</library>
    <workingDir>rtc</workingDir>
    <inputFile>.</inputFile>
  </component>
  <component name="FlowFM">
    <library>dflowfm</library>
    <process>0 1 2 3 4 5 6 7 8 9 10 11 12 13</process>
    <mpiCommunicator>DFM_COMM_DFMWORLD</mpiCommunicator>
    <workingDir>dflowfm</workingDir>
    <inputFile>FlowFM.mdu</inputFile>
  </component>
  <coupler name="rtc_to_flow">
    <sourceComponent>Real_Time_Control</sourceComponent>
    <targetComponent>FlowFM</targetComponent>
    <item>
      <sourceName>[Output]Woodruff_Dam_simple/CrestLevel</sourceName>
      <targetName>weirs/Woodruff_Dam_simple/CrestLevel</targetName>
    </item>
    <logger>
      <workingDir>.</workingDir>
      <outputFile>rtc_to_flow.nc</outputFile>
    </logger>
  </coupler>
  <coupler name="flow_to_rtc">
    <sourceComponent>FlowFM</sourceComponent>
    <targetComponent>Real_Time_Control</targetComponent>
    <item>
      <sourceName>observations/Dam/water_level</sourceName>
      <targetName>[Input]Dam/water_level</targetName>
    </item>
    <logger>
      <workingDir>.</workingDir>
      <outputFile>flow_to_rtc.nc</outputFile>
    </logger>
  </coupler>
</dimrConfig>
